<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Demande de Devis | Atelier OLDA</title>
  <link rel="icon" type="image/png" href="/images/Untitled_Artwork 17.png">
  <style>
    /* ========== CSS Variables - Apple Design System ========== */
    :root {
      --white: #ffffff;
      --off-white: #fafafa;
      --gray-50: #f5f5f7;
      --gray-100: #e8e8ed;
      --gray-200: #d2d2d7;
      --gray-400: #86868b;
      --gray-600: #6e6e73;
      --gray-800: #1d1d1f;
      --black: #000000;
      --blue: #0071e3;
      --blue-hover: #0077ed;
      --green: #34c759;
      --orange: #ff9500;
      --radius-sm: 8px;
      --radius-md: 12px;
      --radius-lg: 18px;
      --radius-xl: 22px;
      --radius-full: 50px;
      --shadow-sm: 0 2px 8px rgba(0,0,0,0.04);
      --shadow-md: 0 4px 20px rgba(0,0,0,0.08);
      --shadow-lg: 0 8px 40px rgba(0,0,0,0.12);
      --shadow-hover: 0 12px 48px rgba(0,0,0,0.16);
      --transition-fast: 0.2s cubic-bezier(0.25, 0.1, 0.25, 1);
      --transition-medium: 0.4s cubic-bezier(0.25, 0.1, 0.25, 1);
      --transition-slow: 0.6s cubic-bezier(0.25, 0.1, 0.25, 1);
      --font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'SF Pro Text', 'Helvetica Neue', Arial, sans-serif;
    }

    /* ========== Reset & Base ========== */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      scroll-behavior: smooth;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    body {
      font-family: var(--font-family);
      background: var(--white);
      color: var(--gray-800);
      line-height: 1.5;
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* ========== Typography ========== */
    h1 {
      font-size: clamp(2rem, 5vw, 3.5rem);
      font-weight: 600;
      letter-spacing: -0.02em;
      line-height: 1.1;
    }

    h2 {
      font-size: clamp(1.5rem, 3vw, 2rem);
      font-weight: 600;
      letter-spacing: -0.01em;
    }

    h3 {
      font-size: 1.25rem;
      font-weight: 600;
    }

    p {
      color: var(--gray-600);
      font-size: 1.0625rem;
    }

    /* ========== Header ========== */
    .header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 52px;
      background: rgba(255, 255, 255, 0.72);
      backdrop-filter: saturate(180%) blur(20px);
      -webkit-backdrop-filter: saturate(180%) blur(20px);
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 max(22px, env(safe-area-inset-left));
      border-bottom: 0.5px solid rgba(0,0,0,0.1);
    }

    .header-logo {
      height: 28px;
      cursor: pointer;
      transition: opacity var(--transition-fast);
    }

    .header-logo:hover {
      opacity: 0.7;
    }

    .header-link {
      font-size: 0.875rem;
      color: var(--blue);
      text-decoration: none;
      font-weight: 400;
      transition: color var(--transition-fast);
    }

    .header-link:hover {
      color: var(--blue-hover);
    }

    /* ========== Main Container ========== */
    .main {
      padding-top: 52px;
      min-height: 100vh;
    }

    /* ========== Stepper Navigation ========== */
    .stepper-container {
      position: sticky;
      top: 52px;
      background: rgba(255, 255, 255, 0.92);
      backdrop-filter: saturate(180%) blur(20px);
      -webkit-backdrop-filter: saturate(180%) blur(20px);
      z-index: 100;
      padding: 20px 0;
      border-bottom: 0.5px solid rgba(0,0,0,0.08);
    }

    .stepper {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 0;
      max-width: 600px;
      margin: 0 auto;
      padding: 0 20px;
    }

    .step {
      display: flex;
      align-items: center;
      gap: 10px;
      cursor: pointer;
      transition: all var(--transition-fast);
      padding: 8px 16px;
      border-radius: var(--radius-full);
      position: relative;
    }

    .step:hover {
      background: var(--gray-50);
    }

    .step-number {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background: var(--gray-200);
      color: var(--gray-600);
      font-size: 0.8125rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all var(--transition-medium);
    }

    .step.active .step-number {
      background: var(--blue);
      color: var(--white);
      transform: scale(1.1);
    }

    .step.completed .step-number {
      background: var(--green);
      color: var(--white);
    }

    .step.completed .step-number::after {
      content: '‚úì';
      font-size: 0.75rem;
    }

    .step.completed .step-number span {
      display: none;
    }

    .step-label {
      font-size: 0.8125rem;
      font-weight: 500;
      color: var(--gray-400);
      transition: color var(--transition-fast);
      white-space: nowrap;
    }

    .step.active .step-label {
      color: var(--gray-800);
    }

    .step.completed .step-label {
      color: var(--green);
    }

    .step-connector {
      width: 40px;
      height: 1px;
      background: var(--gray-200);
      margin: 0 4px;
      transition: background var(--transition-medium);
    }

    .step-connector.completed {
      background: var(--green);
    }

    @media (max-width: 640px) {
      .step-label {
        display: none;
      }
      .step {
        padding: 8px 12px;
      }
      .step-connector {
        width: 24px;
      }
    }

    /* ========== Form Steps ========== */
    .form-container {
      max-width: 680px;
      margin: 0 auto;
      padding: 60px 24px 100px;
    }

    .form-step {
      display: none;
      animation: fadeSlideIn 0.5s ease forwards;
    }

    .form-step.active {
      display: block;
    }

    @keyframes fadeSlideIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .step-header {
      text-align: center;
      margin-bottom: 48px;
    }

    .step-header h1 {
      margin-bottom: 12px;
    }

    /* ========== Form Elements ========== */
    .form-group {
      margin-bottom: 24px;
    }

    .form-row {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
    }

    @media (max-width: 480px) {
      .form-row {
        grid-template-columns: 1fr;
      }
    }

    .form-label {
      display: block;
      font-size: 0.875rem;
      font-weight: 500;
      color: var(--gray-800);
      margin-bottom: 8px;
    }

    .form-input {
      width: 100%;
      padding: 14px 18px;
      font-size: 1rem;
      font-family: inherit;
      border: 1px solid var(--gray-200);
      border-radius: var(--radius-md);
      background: var(--white);
      color: var(--gray-800);
      transition: all var(--transition-fast);
      outline: none;
    }

    .form-input:focus {
      border-color: var(--blue);
      box-shadow: 0 0 0 4px rgba(0, 113, 227, 0.1);
    }

    .form-input::placeholder {
      color: var(--gray-400);
    }

    textarea.form-input {
      resize: vertical;
      min-height: 120px;
    }

    /* ========== Segmented Control (Toggle) ========== */
    .segmented-control {
      display: inline-flex;
      background: var(--gray-100);
      border-radius: var(--radius-md);
      padding: 4px;
      gap: 4px;
    }

    .segment {
      padding: 10px 24px;
      font-size: 0.9375rem;
      font-weight: 500;
      color: var(--gray-600);
      background: transparent;
      border: none;
      border-radius: var(--radius-sm);
      cursor: pointer;
      transition: all var(--transition-fast);
      font-family: inherit;
    }

    .segment:hover {
      color: var(--gray-800);
    }

    .segment.active {
      background: var(--white);
      color: var(--gray-800);
      box-shadow: var(--shadow-sm);
    }

    /* ========== Collection Cards ========== */
    .collection-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin-bottom: 40px;
    }

    @media (max-width: 768px) {
      .collection-grid {
        grid-template-columns: 1fr;
        gap: 16px;
      }
    }

    .collection-card {
      background: var(--white);
      border-radius: var(--radius-xl);
      overflow: hidden;
      border: 2px solid transparent;
      cursor: pointer;
      transition: all var(--transition-medium);
      box-shadow: var(--shadow-md);
    }

    .collection-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-hover);
    }

    .collection-card.selected {
      border-color: var(--blue);
      box-shadow: 0 0 0 4px rgba(0, 113, 227, 0.15), var(--shadow-lg);
    }

    .card-images {
      display: grid;
      grid-template-columns: 1fr 1fr;
      height: 180px;
      overflow: hidden;
    }

    .card-images img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform var(--transition-slow);
    }

    .collection-card:hover .card-images img {
      transform: scale(1.05);
    }

    .card-content {
      padding: 20px;
    }

    .card-badge {
      display: inline-block;
      font-size: 0.6875rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      padding: 4px 10px;
      border-radius: var(--radius-full);
      background: var(--gray-100);
      color: var(--gray-600);
      margin-bottom: 10px;
    }

    .collection-card.selected .card-badge {
      background: rgba(0, 113, 227, 0.1);
      color: var(--blue);
    }

    .card-content h3 {
      margin-bottom: 6px;
    }

    .card-content p {
      font-size: 0.875rem;
      line-height: 1.4;
    }

    .card-check {
      position: absolute;
      top: 12px;
      right: 12px;
      width: 24px;
      height: 24px;
      background: var(--blue);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 0.75rem;
      opacity: 0;
      transform: scale(0.5);
      transition: all var(--transition-fast);
    }

    .collection-card.selected .card-check {
      opacity: 1;
      transform: scale(1);
    }

    .collection-card {
      position: relative;
    }

    /* ========== Options Chips ========== */
    .options-section {
      margin-top: 32px;
    }

    .options-title {
      font-size: 0.9375rem;
      font-weight: 600;
      margin-bottom: 16px;
      color: var(--gray-800);
    }

    .options-chips {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .chip {
      padding: 10px 20px;
      font-size: 0.9375rem;
      font-weight: 500;
      color: var(--gray-600);
      background: var(--gray-50);
      border: 1.5px solid var(--gray-200);
      border-radius: var(--radius-full);
      cursor: pointer;
      transition: all var(--transition-fast);
      font-family: inherit;
    }

    .chip:hover {
      background: var(--gray-100);
      border-color: var(--gray-400);
    }

    .chip.active {
      background: rgba(0, 113, 227, 0.08);
      border-color: var(--blue);
      color: var(--blue);
    }

    /* ========== Color Swatches ========== */
    .color-section {
      margin-bottom: 40px;
    }

    .color-swatches {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    .color-swatch {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      cursor: pointer;
      border: 3px solid transparent;
      transition: all var(--transition-fast);
      position: relative;
      box-shadow: inset 0 0 0 1px rgba(0,0,0,0.1);
    }

    .color-swatch:hover {
      transform: scale(1.1);
    }

    .color-swatch.selected {
      border-color: var(--blue);
      transform: scale(1.15);
    }

    .color-swatch.selected::after {
      content: '‚úì';
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1rem;
      font-weight: bold;
    }

    .color-swatch[data-color="white"] { background: #ffffff; }
    .color-swatch[data-color="white"].selected::after { color: var(--gray-800); }
    .color-swatch[data-color="black"] { background: #1d1d1f; }
    .color-swatch[data-color="black"].selected::after { color: #ffffff; }
    .color-swatch[data-color="navy"] { background: #0a3d62; }
    .color-swatch[data-color="navy"].selected::after { color: #ffffff; }
    .color-swatch[data-color="gray"] { background: #8e8e93; }
    .color-swatch[data-color="gray"].selected::after { color: #ffffff; }
    .color-swatch[data-color="red"] { background: #d63031; }
    .color-swatch[data-color="red"].selected::after { color: #ffffff; }
    .color-swatch[data-color="green"] { background: #00b894; }
    .color-swatch[data-color="green"].selected::after { color: #ffffff; }

    .color-label {
      font-size: 0.875rem;
      color: var(--gray-600);
      margin-top: 12px;
    }

    /* ========== Size Table ========== */
    .size-section {
      margin-bottom: 40px;
    }

    .size-table-wrapper {
      overflow-x: auto;
      border-radius: var(--radius-lg);
      border: 1px solid var(--gray-200);
    }

    .size-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9375rem;
    }

    .size-table th,
    .size-table td {
      padding: 14px 16px;
      text-align: center;
      border-bottom: 1px solid var(--gray-100);
    }

    .size-table th {
      background: var(--gray-50);
      font-weight: 600;
      color: var(--gray-800);
      font-size: 0.8125rem;
      text-transform: uppercase;
      letter-spacing: 0.03em;
    }

    .size-table th:first-child,
    .size-table td:first-child {
      text-align: left;
      font-weight: 500;
    }

    .size-table tr:last-child td {
      border-bottom: none;
    }

    .size-table tbody tr:hover {
      background: var(--gray-50);
    }

    .qty-input {
      width: 60px;
      padding: 8px 4px;
      text-align: center;
      font-size: 0.9375rem;
      border: 1px solid var(--gray-200);
      border-radius: var(--radius-sm);
      font-family: inherit;
      transition: all var(--transition-fast);
    }

    .qty-input:focus {
      outline: none;
      border-color: var(--blue);
      box-shadow: 0 0 0 3px rgba(0, 113, 227, 0.1);
    }

    /* ========== Upload Zone ========== */
    .upload-section {
      margin-bottom: 40px;
    }

    .upload-zone {
      border: 2px dashed var(--gray-200);
      border-radius: var(--radius-xl);
      padding: 48px 24px;
      text-align: center;
      cursor: pointer;
      transition: all var(--transition-fast);
      background: var(--gray-50);
    }

    .upload-zone:hover,
    .upload-zone.drag-over {
      border-color: var(--blue);
      background: rgba(0, 113, 227, 0.04);
    }

    .upload-zone.has-files {
      border-style: solid;
      border-color: var(--green);
      background: rgba(52, 199, 89, 0.04);
    }

    .upload-icon {
      font-size: 3rem;
      margin-bottom: 16px;
      opacity: 0.6;
    }

    .upload-text {
      font-size: 1.0625rem;
      color: var(--gray-800);
      margin-bottom: 8px;
    }

    .upload-hint {
      font-size: 0.875rem;
      color: var(--gray-400);
    }

    .upload-input {
      display: none;
    }

    .uploaded-files {
      margin-top: 20px;
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      justify-content: center;
    }

    .uploaded-file {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 16px;
      background: var(--white);
      border-radius: var(--radius-full);
      font-size: 0.875rem;
      box-shadow: var(--shadow-sm);
    }

    .uploaded-file .remove-file {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: var(--gray-200);
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      color: var(--gray-600);
      transition: all var(--transition-fast);
    }

    .uploaded-file .remove-file:hover {
      background: #ff3b30;
      color: white;
    }

    /* ========== Date Picker ========== */
    .date-section {
      margin-bottom: 40px;
    }

    .date-input-wrapper {
      position: relative;
      max-width: 280px;
    }

    .date-input {
      width: 100%;
      padding: 16px 20px;
      font-size: 1rem;
      font-family: inherit;
      border: 1px solid var(--gray-200);
      border-radius: var(--radius-md);
      background: var(--white);
      color: var(--gray-800);
      cursor: pointer;
      transition: all var(--transition-fast);
    }

    .date-input:focus {
      outline: none;
      border-color: var(--blue);
      box-shadow: 0 0 0 4px rgba(0, 113, 227, 0.1);
    }

    /* ========== Reassurance Box ========== */
    .reassurance {
      background: linear-gradient(135deg, var(--gray-50) 0%, rgba(0, 113, 227, 0.04) 100%);
      border-radius: var(--radius-xl);
      padding: 28px 32px;
      display: flex;
      align-items: flex-start;
      gap: 16px;
      margin-top: 40px;
    }

    .reassurance-icon {
      font-size: 1.5rem;
      flex-shrink: 0;
    }

    .reassurance p {
      font-size: 0.9375rem;
      line-height: 1.6;
      color: var(--gray-600);
    }

    /* ========== Navigation Buttons ========== */
    .form-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 48px;
      padding-top: 32px;
      border-top: 1px solid var(--gray-100);
    }

    .btn {
      padding: 14px 32px;
      font-size: 1rem;
      font-weight: 500;
      font-family: inherit;
      border-radius: var(--radius-full);
      cursor: pointer;
      transition: all var(--transition-fast);
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .btn-secondary {
      background: transparent;
      color: var(--blue);
      border: none;
    }

    .btn-secondary:hover {
      background: var(--gray-50);
    }

    .btn-primary {
      background: var(--blue);
      color: var(--white);
      border: none;
      box-shadow: var(--shadow-md);
    }

    .btn-primary:hover {
      background: var(--blue-hover);
      box-shadow: var(--shadow-lg);
      transform: translateY(-1px);
    }

    .btn-primary:active {
      transform: translateY(0);
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none !important;
    }

    .btn-submit {
      background: linear-gradient(135deg, var(--blue) 0%, #34c759 100%);
      padding: 16px 40px;
      font-size: 1.0625rem;
    }

    .btn-submit:hover {
      box-shadow: 0 8px 32px rgba(0, 113, 227, 0.3);
    }

    /* ========== Success Screen ========== */
    .success-screen {
      display: none;
      text-align: center;
      padding: 80px 24px;
      animation: fadeSlideIn 0.6s ease forwards;
    }

    .success-screen.active {
      display: block;
    }

    .success-icon {
      width: 80px;
      height: 80px;
      background: linear-gradient(135deg, var(--green) 0%, #00c853 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 32px;
      font-size: 2.5rem;
      color: white;
      box-shadow: 0 8px 32px rgba(52, 199, 89, 0.3);
    }

    .success-screen h1 {
      margin-bottom: 16px;
    }

    .success-screen p {
      max-width: 400px;
      margin: 0 auto 32px;
    }

    .back-home {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      color: var(--blue);
      text-decoration: none;
      font-weight: 500;
      font-size: 1.0625rem;
      transition: all var(--transition-fast);
    }

    .back-home:hover {
      gap: 12px;
    }

    /* ========== Loading Overlay ========== */
    .loading-overlay {
      position: fixed;
      inset: 0;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 2000;
    }

    .loading-overlay.active {
      display: flex;
    }

    .loading-spinner {
      width: 48px;
      height: 48px;
      border: 3px solid var(--gray-200);
      border-top-color: var(--blue);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* ========== Summary Section (Step 4) ========== */
    .summary-section {
      background: var(--gray-50);
      border-radius: var(--radius-xl);
      padding: 24px;
      margin-bottom: 24px;
    }

    .summary-title {
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--gray-400);
      margin-bottom: 12px;
    }

    .summary-content {
      font-size: 0.9375rem;
      color: var(--gray-800);
    }

    .summary-content p {
      color: var(--gray-800);
      margin-bottom: 4px;
    }

    .summary-content p:last-child {
      margin-bottom: 0;
    }

    .summary-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
    }

    @media (max-width: 480px) {
      .summary-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>

  <!-- Header -->
  <header class="header">
    <a href="/">
      <img src="/images/Untitled_Artwork 17.png" alt="Atelier OLDA" class="header-logo">
    </a>
    <a href="/" class="header-link">Retour √† la boutique</a>
  </header>

  <!-- Main Content -->
  <main class="main">
    <!-- Stepper Navigation -->
    <div class="stepper-container">
      <nav class="stepper">
        <div class="step active" data-step="1">
          <span class="step-number"><span>1</span></span>
          <span class="step-label">Identit√©</span>
        </div>
        <div class="step-connector"></div>
        <div class="step" data-step="2">
          <span class="step-number"><span>2</span></span>
          <span class="step-label">Collection</span>
        </div>
        <div class="step-connector"></div>
        <div class="step" data-step="3">
          <span class="step-number"><span>3</span></span>
          <span class="step-label">Personnalisation</span>
        </div>
        <div class="step-connector"></div>
        <div class="step" data-step="4">
          <span class="step-number"><span>4</span></span>
          <span class="step-label">Finalisation</span>
        </div>
      </nav>
    </div>

    <!-- Form Container -->
    <div class="form-container">

      <!-- Step 1: Identit√© -->
      <section class="form-step active" data-step="1">
        <div class="step-header">
          <h1>Parlez-nous de vous</h1>
          <p>Ces informations nous aideront √† personnaliser votre devis.</p>
        </div>

        <div class="form-group">
          <label class="form-label">Vous √™tes</label>
          <div class="segmented-control">
            <button type="button" class="segment active" data-type="professionnel">Professionnel</button>
            <button type="button" class="segment" data-type="particulier">Particulier</button>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label class="form-label" for="lastName">Nom *</label>
            <input type="text" id="lastName" class="form-input" placeholder="Dupont" required>
          </div>
          <div class="form-group">
            <label class="form-label" for="firstName">Pr√©nom *</label>
            <input type="text" id="firstName" class="form-input" placeholder="Marie" required>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label" for="company">Soci√©t√© <span style="color: var(--gray-400)">(optionnel)</span></label>
          <input type="text" id="company" class="form-input" placeholder="Nom de votre entreprise">
        </div>

        <div class="form-group">
          <label class="form-label" for="email">Email *</label>
          <input type="email" id="email" class="form-input" placeholder="marie@exemple.fr" required>
        </div>

        <div class="form-group">
          <label class="form-label" for="phone">T√©l√©phone *</label>
          <input type="tel" id="phone" class="form-input" placeholder="06 12 34 56 78" required>
        </div>

        <div class="form-group">
          <label class="form-label" for="projectDesc">D√©crivez votre projet en quelques mots</label>
          <textarea id="projectDesc" class="form-input" placeholder="Uniformes pour mon restaurant, tenues pour un √©v√©nement sportif, etc."></textarea>
        </div>

        <div class="form-nav">
          <div></div>
          <button type="button" class="btn btn-primary" onclick="goToStep(2)">
            Continuer
            <span>‚Üí</span>
          </button>
        </div>
      </section>

      <!-- Step 2: Collection -->
      <section class="form-step" data-step="2">
        <div class="step-header">
          <h1>Choisissez votre textile</h1>
          <p>Des mati√®res s√©lectionn√©es pour leur qualit√© et leur durabilit√©.</p>
        </div>

        <div class="collection-grid">
          <div class="collection-card" data-collection="entree">
            <div class="card-check">‚úì</div>
            <div class="card-images">
              <img src="https://images.unsplash.com/photo-1596755094514-f87e34085b2c?w=300&h=200&fit=crop" alt="Homme entr√©e de gamme">
              <img src="https://images.unsplash.com/photo-1594938298603-c8148c4dae35?w=300&h=200&fit=crop" alt="Femme entr√©e de gamme">
            </div>
            <div class="card-content">
              <span class="card-badge">180g</span>
              <h3>Entr√©e de gamme</h3>
              <p>Id√©al pour la restauration ou l'√©v√©nementiel. L√©ger et √©conomique.</p>
            </div>
          </div>

          <div class="collection-card" data-collection="milieu">
            <div class="card-check">‚úì</div>
            <div class="card-images">
              <img src="https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=300&h=200&fit=crop" alt="Homme milieu de gamme">
              <img src="https://images.unsplash.com/photo-1618354691373-d851c5c3a990?w=300&h=200&fit=crop" alt="Femme milieu de gamme">
            </div>
            <div class="card-content">
              <span class="card-badge">220g</span>
              <h3>Milieu de gamme</h3>
              <p>Le confort au quotidien. Robuste et polyvalent pour tous usages.</p>
            </div>
          </div>

          <div class="collection-card" data-collection="haut">
            <div class="card-check">‚úì</div>
            <div class="card-images">
              <img src="https://images.unsplash.com/photo-1576566588028-4147f3842f27?w=300&h=200&fit=crop" alt="Homme haut de gamme">
              <img src="https://images.unsplash.com/photo-1554568218-0f1715e72254?w=300&h=200&fit=crop" alt="Femme haut de gamme">
            </div>
            <div class="card-content">
              <span class="card-badge">250g</span>
              <h3>Haut de gamme</h3>
              <p>Textile premium. Coupe mode, finitions soign√©es et durabilit√© maximale.</p>
            </div>
          </div>
        </div>

        <div class="options-section">
          <div class="options-title">Options sp√©cifiques</div>
          <div class="options-chips">
            <button type="button" class="chip" data-option="exterieur">Travail ext√©rieur</button>
            <button type="button" class="chip" data-option="lycra">Lycra / Stretch</button>
            <button type="button" class="chip" data-option="bio">Coton bio</button>
            <button type="button" class="chip" data-option="recycle">Mati√®res recycl√©es</button>
          </div>
        </div>

        <div class="form-nav">
          <button type="button" class="btn btn-secondary" onclick="goToStep(1)">
            <span>‚Üê</span>
            Retour
          </button>
          <button type="button" class="btn btn-primary" onclick="goToStep(3)">
            Continuer
            <span>‚Üí</span>
          </button>
        </div>
      </section>

      <!-- Step 3: Personnalisation -->
      <section class="form-step" data-step="3">
        <div class="step-header">
          <h1>Personnalisez votre commande</h1>
          <p>Couleurs, tailles et marquage selon vos besoins.</p>
        </div>

        <div class="color-section">
          <label class="form-label">Couleur principale</label>
          <div class="color-swatches">
            <button type="button" class="color-swatch selected" data-color="white" title="Blanc"></button>
            <button type="button" class="color-swatch" data-color="black" title="Noir"></button>
            <button type="button" class="color-swatch" data-color="navy" title="Bleu marine"></button>
            <button type="button" class="color-swatch" data-color="gray" title="Gris"></button>
            <button type="button" class="color-swatch" data-color="red" title="Rouge"></button>
            <button type="button" class="color-swatch" data-color="green" title="Vert"></button>
          </div>
          <p class="color-label">Couleur s√©lectionn√©e : <strong id="selectedColorName">Blanc</strong></p>
        </div>

        <div class="size-section">
          <label class="form-label">Quantit√©s par taille</label>

          <div class="size-table-wrapper">
            <table class="size-table">
              <thead>
                <tr>
                  <th></th>
                  <th>S</th>
                  <th>M</th>
                  <th>L</th>
                  <th>XL</th>
                  <th>XXL</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Homme</td>
                  <td><input type="number" class="qty-input" data-gender="homme" data-size="S" min="0" value="0"></td>
                  <td><input type="number" class="qty-input" data-gender="homme" data-size="M" min="0" value="0"></td>
                  <td><input type="number" class="qty-input" data-gender="homme" data-size="L" min="0" value="0"></td>
                  <td><input type="number" class="qty-input" data-gender="homme" data-size="XL" min="0" value="0"></td>
                  <td><input type="number" class="qty-input" data-gender="homme" data-size="XXL" min="0" value="0"></td>
                </tr>
                <tr>
                  <td>Femme</td>
                  <td><input type="number" class="qty-input" data-gender="femme" data-size="S" min="0" value="0"></td>
                  <td><input type="number" class="qty-input" data-gender="femme" data-size="M" min="0" value="0"></td>
                  <td><input type="number" class="qty-input" data-gender="femme" data-size="L" min="0" value="0"></td>
                  <td><input type="number" class="qty-input" data-gender="femme" data-size="XL" min="0" value="0"></td>
                  <td><input type="number" class="qty-input" data-gender="femme" data-size="XXL" min="0" value="0"></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <div class="upload-section">
          <label class="form-label">Votre logo ou visuels</label>
          <div class="upload-zone" id="uploadZone">
            <div class="upload-icon">üìÅ</div>
            <p class="upload-text">Glissez vos fichiers ici ou cliquez pour parcourir</p>
            <p class="upload-hint">PNG, JPG, PDF, AI ou EPS (max 10 Mo par fichier)</p>
            <input type="file" class="upload-input" id="fileInput" multiple accept=".png,.jpg,.jpeg,.pdf,.ai,.eps">
            <div class="uploaded-files" id="uploadedFiles"></div>
          </div>
        </div>

        <div class="form-nav">
          <button type="button" class="btn btn-secondary" onclick="goToStep(2)">
            <span>‚Üê</span>
            Retour
          </button>
          <button type="button" class="btn btn-primary" onclick="goToStep(4)">
            Continuer
            <span>‚Üí</span>
          </button>
        </div>
      </section>

      <!-- Step 4: Finalisation -->
      <section class="form-step" data-step="4">
        <div class="step-header">
          <h1>Finalisez votre demande</h1>
          <p>V√©rifiez vos informations et envoyez votre demande de devis.</p>
        </div>

        <div class="summary-grid">
          <div class="summary-section">
            <div class="summary-title">Contact</div>
            <div class="summary-content" id="summaryContact">
              <!-- Filled by JS -->
            </div>
          </div>
          <div class="summary-section">
            <div class="summary-title">Collection</div>
            <div class="summary-content" id="summaryCollection">
              <!-- Filled by JS -->
            </div>
          </div>
        </div>

        <div class="summary-section">
          <div class="summary-title">Personnalisation</div>
          <div class="summary-content" id="summaryCustom">
            <!-- Filled by JS -->
          </div>
        </div>

        <div class="date-section">
          <label class="form-label">Date de livraison souhait√©e</label>
          <div class="date-input-wrapper">
            <input type="date" class="date-input" id="deliveryDate">
          </div>
        </div>

        <div class="form-group">
          <label class="form-label" for="additionalNotes">Remarques compl√©mentaires <span style="color: var(--gray-400)">(optionnel)</span></label>
          <textarea id="additionalNotes" class="form-input" placeholder="Informations suppl√©mentaires, contraintes particuli√®res..."></textarea>
        </div>

        <div class="reassurance">
          <span class="reassurance-icon">üíé</span>
          <p>Afin de cerner au mieux votre demande et vous proposer le tarif le plus juste, ces informations nous sont pr√©cieuses. Notre √©quipe vous recontactera sous 24-48h avec une proposition personnalis√©e.</p>
        </div>

        <div class="form-nav">
          <button type="button" class="btn btn-secondary" onclick="goToStep(3)">
            <span>‚Üê</span>
            Retour
          </button>
          <button type="button" class="btn btn-primary btn-submit" onclick="submitQuote()">
            Envoyer ma demande
            <span>‚ú®</span>
          </button>
        </div>
      </section>

      <!-- Success Screen -->
      <section class="success-screen" id="successScreen">
        <div class="success-icon">‚úì</div>
        <h1>Demande envoy√©e !</h1>
        <p>Merci pour votre confiance. Notre √©quipe analyse votre projet et vous recontactera tr√®s rapidement avec un devis personnalis√©.</p>
        <a href="/" class="back-home">
          <span>‚Üê</span>
          Retour √† la boutique
        </a>
      </section>

    </div>
  </main>

  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loadingOverlay">
    <div class="loading-spinner"></div>
  </div>

  <!-- EmailJS SDK -->
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>

  <script>
    // ========== State ==========
    let currentStep = 1;
    let formData = {
      type: 'professionnel',
      lastName: '',
      firstName: '',
      company: '',
      email: '',
      phone: '',
      projectDesc: '',
      collection: null,
      options: [],
      color: 'white',
      sizes: {
        homme: { S: 0, M: 0, L: 0, XL: 0, XXL: 0 },
        femme: { S: 0, M: 0, L: 0, XL: 0, XXL: 0 }
      },
      files: [],
      deliveryDate: '',
      additionalNotes: ''
    };

    const colorNames = {
      white: 'Blanc',
      black: 'Noir',
      navy: 'Bleu marine',
      gray: 'Gris',
      red: 'Rouge',
      green: 'Vert'
    };

    const collectionNames = {
      entree: 'Entr√©e de gamme (180g)',
      milieu: 'Milieu de gamme (220g)',
      haut: 'Haut de gamme (250g)'
    };

    // ========== Initialize EmailJS ==========
    emailjs.init('skJW2Ge2SH15HZXNp');

    // ========== Step Navigation ==========
    function goToStep(step) {
      // Validate current step before proceeding
      if (step > currentStep && !validateStep(currentStep)) {
        return;
      }

      // Save form data
      saveFormData();

      // Update step
      currentStep = step;

      // Update UI
      updateStepperUI();
      showStep(step);

      // Update summary if going to step 4
      if (step === 4) {
        updateSummary();
      }

      // Scroll to top
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function validateStep(step) {
      if (step === 1) {
        const lastName = document.getElementById('lastName').value.trim();
        const firstName = document.getElementById('firstName').value.trim();
        const email = document.getElementById('email').value.trim();
        const phone = document.getElementById('phone').value.trim();

        if (!lastName || !firstName || !email || !phone) {
          alert('Veuillez remplir tous les champs obligatoires.');
          return false;
        }

        if (!email.includes('@')) {
          alert('Veuillez entrer une adresse email valide.');
          return false;
        }
      }

      return true;
    }

    function saveFormData() {
      formData.lastName = document.getElementById('lastName').value.trim();
      formData.firstName = document.getElementById('firstName').value.trim();
      formData.company = document.getElementById('company').value.trim();
      formData.email = document.getElementById('email').value.trim();
      formData.phone = document.getElementById('phone').value.trim();
      formData.projectDesc = document.getElementById('projectDesc').value.trim();
      formData.deliveryDate = document.getElementById('deliveryDate').value;
      formData.additionalNotes = document.getElementById('additionalNotes').value.trim();

      // Save sizes
      document.querySelectorAll('.qty-input').forEach(input => {
        const gender = input.dataset.gender;
        const size = input.dataset.size;
        formData.sizes[gender][size] = parseInt(input.value) || 0;
      });
    }

    function updateStepperUI() {
      document.querySelectorAll('.step').forEach((stepEl, index) => {
        const stepNum = index + 1;
        stepEl.classList.remove('active', 'completed');

        if (stepNum < currentStep) {
          stepEl.classList.add('completed');
        } else if (stepNum === currentStep) {
          stepEl.classList.add('active');
        }
      });

      document.querySelectorAll('.step-connector').forEach((connector, index) => {
        connector.classList.toggle('completed', index < currentStep - 1);
      });
    }

    function showStep(step) {
      document.querySelectorAll('.form-step').forEach(el => {
        el.classList.remove('active');
      });
      document.querySelector(`.form-step[data-step="${step}"]`).classList.add('active');
    }

    // ========== Summary ==========
    function updateSummary() {
      // Contact summary
      const contactHtml = `
        <p><strong>${formData.firstName} ${formData.lastName}</strong></p>
        ${formData.company ? `<p>${formData.company}</p>` : ''}
        <p>${formData.email}</p>
        <p>${formData.phone}</p>
        <p style="font-size: 0.8125rem; color: var(--gray-400);">${formData.type === 'professionnel' ? 'Professionnel' : 'Particulier'}</p>
      `;
      document.getElementById('summaryContact').innerHTML = contactHtml;

      // Collection summary
      let collectionHtml = formData.collection
        ? `<p><strong>${collectionNames[formData.collection]}</strong></p>`
        : '<p style="color: var(--gray-400);">Aucune collection s√©lectionn√©e</p>';

      if (formData.options.length > 0) {
        collectionHtml += `<p style="font-size: 0.875rem;">Options : ${formData.options.join(', ')}</p>`;
      }
      document.getElementById('summaryCollection').innerHTML = collectionHtml;

      // Customization summary
      let totalQty = 0;
      let sizeDetails = [];

      ['homme', 'femme'].forEach(gender => {
        const genderLabel = gender === 'homme' ? 'H' : 'F';
        Object.entries(formData.sizes[gender]).forEach(([size, qty]) => {
          if (qty > 0) {
            sizeDetails.push(`${genderLabel} ${size}: ${qty}`);
            totalQty += qty;
          }
        });
      });

      let customHtml = `
        <p><strong>Couleur :</strong> ${colorNames[formData.color]}</p>
        <p><strong>Quantit√© totale :</strong> ${totalQty} pi√®ces</p>
      `;

      if (sizeDetails.length > 0) {
        customHtml += `<p style="font-size: 0.875rem; color: var(--gray-600);">${sizeDetails.join(' ‚Ä¢ ')}</p>`;
      }

      if (formData.files.length > 0) {
        customHtml += `<p><strong>Fichiers :</strong> ${formData.files.length} fichier(s) joint(s)</p>`;
      }

      document.getElementById('summaryCustom').innerHTML = customHtml;
    }

    // ========== Submit Quote ==========
    async function submitQuote() {
      saveFormData();

      // Calculate total quantity
      let totalQty = 0;
      let sizeBreakdown = [];
      ['homme', 'femme'].forEach(gender => {
        Object.entries(formData.sizes[gender]).forEach(([size, qty]) => {
          if (qty > 0) {
            sizeBreakdown.push(`${gender === 'homme' ? 'Homme' : 'Femme'} ${size}: ${qty}`);
            totalQty += qty;
          }
        });
      });

      // Build email content
      const orderNumber = 'DEVIS-' + Math.random().toString(36).substring(2, 8).toUpperCase();

      const emailParams = {
        to_email: 'atelieroldacommande@gmail.com',
        order_number: orderNumber,
        customer_name: `${formData.firstName} ${formData.lastName}`,
        customer_email: formData.email,
        order_details: `
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
DEMANDE DE DEVIS TEXTILE - ${orderNumber}
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üìã INFORMATIONS CLIENT
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Type : ${formData.type === 'professionnel' ? 'Professionnel' : 'Particulier'}
Nom : ${formData.lastName}
Pr√©nom : ${formData.firstName}
${formData.company ? `Soci√©t√© : ${formData.company}` : ''}
Email : ${formData.email}
T√©l√©phone : ${formData.phone}

üìù DESCRIPTION DU PROJET
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
${formData.projectDesc || 'Non renseign√©'}

üëï COLLECTION CHOISIE
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
${formData.collection ? collectionNames[formData.collection] : 'Non s√©lectionn√©e'}
${formData.options.length > 0 ? `Options : ${formData.options.join(', ')}` : ''}

üé® PERSONNALISATION
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Couleur : ${colorNames[formData.color]}
Quantit√© totale : ${totalQty} pi√®ces

D√©tail des tailles :
${sizeBreakdown.length > 0 ? sizeBreakdown.join('\n') : 'Non renseign√©'}

Fichiers joints : ${formData.files.length > 0 ? formData.files.join(', ') : 'Aucun'}

üìÖ LIVRAISON
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Date souhait√©e : ${formData.deliveryDate || 'Non pr√©cis√©e'}

üí¨ REMARQUES
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
${formData.additionalNotes || 'Aucune remarque'}

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        `.trim()
      };

      // Show loading
      document.getElementById('loadingOverlay').classList.add('active');

      try {
        await emailjs.send('service_o3r7snn', 'template_sqg7vz2', emailParams);

        // Show success
        document.getElementById('loadingOverlay').classList.remove('active');
        document.querySelectorAll('.form-step').forEach(el => el.classList.remove('active'));
        document.getElementById('successScreen').classList.add('active');
        document.querySelector('.stepper-container').style.display = 'none';

      } catch (error) {
        console.error('Erreur lors de l\'envoi:', error);
        document.getElementById('loadingOverlay').classList.remove('active');
        alert('Une erreur est survenue lors de l\'envoi. Veuillez r√©essayer.');
      }
    }

    // ========== Event Listeners ==========
    document.addEventListener('DOMContentLoaded', () => {
      // Segment control (Professional/Individual)
      document.querySelectorAll('.segment').forEach(btn => {
        btn.addEventListener('click', () => {
          document.querySelectorAll('.segment').forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          formData.type = btn.dataset.type;
        });
      });

      // Collection cards
      document.querySelectorAll('.collection-card').forEach(card => {
        card.addEventListener('click', () => {
          document.querySelectorAll('.collection-card').forEach(c => c.classList.remove('selected'));
          card.classList.add('selected');
          formData.collection = card.dataset.collection;
        });
      });

      // Option chips
      document.querySelectorAll('.chip').forEach(chip => {
        chip.addEventListener('click', () => {
          chip.classList.toggle('active');
          const option = chip.textContent;
          if (chip.classList.contains('active')) {
            formData.options.push(option);
          } else {
            formData.options = formData.options.filter(o => o !== option);
          }
        });
      });

      // Color swatches
      document.querySelectorAll('.color-swatch').forEach(swatch => {
        swatch.addEventListener('click', () => {
          document.querySelectorAll('.color-swatch').forEach(s => s.classList.remove('selected'));
          swatch.classList.add('selected');
          formData.color = swatch.dataset.color;
          document.getElementById('selectedColorName').textContent = colorNames[formData.color];
        });
      });

      // File upload
      const uploadZone = document.getElementById('uploadZone');
      const fileInput = document.getElementById('fileInput');
      const uploadedFiles = document.getElementById('uploadedFiles');

      uploadZone.addEventListener('click', () => fileInput.click());

      uploadZone.addEventListener('dragover', (e) => {
        e.preventDefault();
        uploadZone.classList.add('drag-over');
      });

      uploadZone.addEventListener('dragleave', () => {
        uploadZone.classList.remove('drag-over');
      });

      uploadZone.addEventListener('drop', (e) => {
        e.preventDefault();
        uploadZone.classList.remove('drag-over');
        handleFiles(e.dataTransfer.files);
      });

      fileInput.addEventListener('change', () => {
        handleFiles(fileInput.files);
      });

      function handleFiles(files) {
        Array.from(files).forEach(file => {
          if (file.size > 10 * 1024 * 1024) {
            alert(`Le fichier ${file.name} d√©passe 10 Mo.`);
            return;
          }
          formData.files.push(file.name);
        });
        updateFileList();
      }

      function updateFileList() {
        if (formData.files.length > 0) {
          uploadZone.classList.add('has-files');
          uploadedFiles.innerHTML = formData.files.map((name, i) => `
            <div class="uploaded-file">
              <span>üìÑ ${name}</span>
              <button type="button" class="remove-file" onclick="removeFile(${i})">√ó</button>
            </div>
          `).join('');
        } else {
          uploadZone.classList.remove('has-files');
          uploadedFiles.innerHTML = '';
        }
      }

      window.removeFile = (index) => {
        formData.files.splice(index, 1);
        updateFileList();
      };

      // Set minimum date for delivery (tomorrow)
      const tomorrow = new Date();
      tomorrow.setDate(tomorrow.getDate() + 1);
      document.getElementById('deliveryDate').min = tomorrow.toISOString().split('T')[0];

      // Allow clicking on completed steps to navigate
      document.querySelectorAll('.step').forEach(stepEl => {
        stepEl.addEventListener('click', () => {
          const stepNum = parseInt(stepEl.dataset.step);
          if (stepNum < currentStep || stepEl.classList.contains('completed')) {
            goToStep(stepNum);
          }
        });
      });
    });
  </script>

</body>
</html>
