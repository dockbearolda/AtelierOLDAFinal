<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="OLDA Atelier — Boutique B2B de souvenirs premium Saint-Martin">
    <meta name="theme-color" content="#ffffff">
    <title>OLDA Atelier | Boutique Officielle</title>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <style>
        :root {
            --white: #ffffff;
            --off-white: #fdfcfa;
            --sand: #f5f1eb;
            --sand-dark: #e8e2d9;
            --black: #1d1d1f;
            --charcoal: #2c2c2e;
            --ocean: #0a7ea4;
            --ocean-light: #e6f4f8;
            --tropique: #2d6a4f;
            --gray: #86868b;
            --gray-light: #aeaeb2;
            --border: #e5e5e5;
            --border-light: #f2f2f2;
            --font-main: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", sans-serif;
            --transition-fast: 0.2s ease;
            --transition-smooth: 0.35s cubic-bezier(0.4, 0, 0.2, 1);
            --radius: 8px;
        }
        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
        html { -webkit-tap-highlight-color: transparent; scroll-behavior: smooth; }
        body { font-family: var(--font-main); background: var(--white); color: var(--black); -webkit-font-smoothing: antialiased; line-height: 1.5; overflow-x: hidden; }

        .home-page { position: fixed; inset: 0; background: var(--white); z-index: 500; display: flex; flex-direction: column; align-items: center; justify-content: center; transition: opacity 0.5s ease, visibility 0.5s ease; }
        .home-page.hidden { opacity: 0; visibility: hidden; pointer-events: none; }
        .home-logo { width: clamp(180px, 40vw, 280px); height: auto; margin-bottom: 50px; animation: fadeInUp 0.8s ease; }
        .home-btn { padding: 16px 32px; background: transparent; border: none; color: var(--black); font-family: var(--font-main); font-size: 13px; font-weight: 400; letter-spacing: 0.8px; cursor: pointer; transition: all var(--transition-smooth); animation: fadeInUp 0.8s ease 0.2s both; }
        .home-btn:hover { color: var(--ocean); transform: translateY(-2px); }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .shop-container { opacity: 0; transition: opacity 0.5s ease 0.3s; }
        .shop-container.visible { opacity: 1; }

        .header { position: sticky; top: 0; z-index: 100; display: flex; align-items: center; justify-content: space-between; padding: 0 clamp(20px, 5vw, 40px); height: 65px; background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border-bottom: 1px solid var(--border); }
        .logo { height: 40px; width: auto; cursor: pointer; transition: opacity var(--transition-fast); }
        .logo:hover { opacity: 0.7; }
        .cart-trigger { position: relative; display: flex; align-items: center; justify-content: center; width: 44px; height: 44px; background: none; border: none; cursor: pointer; transition: transform var(--transition-fast); }
        .cart-trigger:hover { transform: scale(1.05); }
        .cart-trigger svg { width: 22px; height: 22px; stroke: var(--black); stroke-width: 1.5; fill: none; }
        .cart-count { position: absolute; top: 4px; right: 4px; min-width: 18px; height: 18px; padding: 0 5px; background: var(--black); color: var(--white); font-size: 10px; font-weight: 400; border-radius: 9px; display: flex; align-items: center; justify-content: center; opacity: 0; transform: scale(0.5); transition: all var(--transition-fast); }
        .cart-count.visible { opacity: 1; transform: scale(1); }

        .nav-main { position: relative; display: flex; gap: 8px; padding: 14px clamp(20px, 5vw, 40px); overflow-x: auto; scrollbar-width: none; border-bottom: 1px solid var(--border); background: var(--white); }
        .nav-main::-webkit-scrollbar { display: none; }
        .tab-btn { flex-shrink: 0; padding: 10px 18px; background: none; border: none; font-size: 11px; font-weight: 400; letter-spacing: 1px; text-transform: uppercase; color: var(--charcoal); cursor: pointer; transition: all var(--transition-fast); white-space: nowrap; border-bottom: 1px solid transparent; }
        .tab-btn:hover { color: var(--black); }
        .tab-btn.active { color: var(--black); border-bottom-color: var(--black); font-weight: 500; }

        .nav-sub { position: relative; display: flex; gap: 20px; padding: 12px clamp(20px, 5vw, 40px); overflow-x: auto; scrollbar-width: none; border-bottom: 1px solid var(--border); background: var(--white); }
        .nav-sub::-webkit-scrollbar { display: none; }
        .sub-btn { flex-shrink: 0; padding: 6px 0; background: none; border: none; border-bottom: 1px solid transparent; font-size: 10px; font-weight: 400; letter-spacing: 0.8px; text-transform: uppercase; color: var(--charcoal); cursor: pointer; transition: all var(--transition-fast); white-space: nowrap; }
        .sub-btn:hover { color: var(--black); }
        .sub-btn.active { color: var(--black); border-bottom-color: var(--black); }

        .product-grid { display: grid; grid-template-columns: repeat(2, 1fr); position: relative; }
        .product-grid::after { content: ""; position: absolute; top: 0; bottom: 0; left: 50%; width: 1px; background: var(--border); pointer-events: none; }
        @media (min-width: 768px) { .product-grid { grid-template-columns: repeat(3, 1fr); } .product-grid::after { display: none; } }
        @media (min-width: 1200px) { .product-grid { grid-template-columns: repeat(4, 1fr); } }

        .product-card { padding: clamp(30px, 6vw, 50px) clamp(15px, 4vw, 25px); display: flex; flex-direction: column; align-items: center; text-align: center; border-bottom: 1px solid var(--border); opacity: 0; transform: translateY(20px); transition: opacity 0.5s ease, transform 0.5s ease; }
        .product-card.visible { opacity: 1; transform: translateY(0); }
        @media (min-width: 768px) { .product-card { border-right: 1px solid var(--border); } .product-card:nth-child(3n) { border-right: none; } }
        @media (min-width: 1200px) { .product-card:nth-child(3n) { border-right: 1px solid var(--border); } .product-card:nth-child(4n) { border-right: none; } }
        .product-img { width: 100%; max-width: 140px; height: 140px; background-color: var(--white); background-size: contain; background-position: center bottom; background-repeat: no-repeat; border-radius: var(--radius); margin: 0 auto 24px auto; transition: transform var(--transition-smooth); display: block; }
        .product-card:hover .product-img { transform: scale(1.03); }
        .product-title { font-size: 13px; font-weight: 500; line-height: 1.4; margin-bottom: 6px; min-height: 36px; display: flex; align-items: center; justify-content: center; }
        .product-info { font-size: 10px; color: var(--gray); letter-spacing: 0.5px; text-transform: uppercase; margin-bottom: 22px; font-weight: 400; }

        .qty-select { appearance: none; -webkit-appearance: none; width: 70px; padding: 5px 20px 5px 8px; background: var(--white); border: 1px solid var(--border); border-radius: 4px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; font-size: 10px; font-weight: 300; letter-spacing: 0.5px; color: var(--black); cursor: pointer; margin-bottom: 12px; transition: border-color var(--transition-fast); background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8' viewBox='0 0 24 24' fill='none' stroke='%2386868b' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 6px center; }
        .qty-select:hover { border-color: var(--gray-light); }
        .qty-select:focus { outline: none; border-color: var(--ocean); box-shadow: 0 0 0 3px var(--ocean-light); }

        .size-select { appearance: none; -webkit-appearance: none; width: 90px; padding: 5px 20px 5px 8px; background: var(--white); border: 1px solid var(--border); border-radius: 4px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; font-size: 10px; font-weight: 300; letter-spacing: 0.5px; color: var(--black); cursor: pointer; margin-bottom: 12px; transition: border-color var(--transition-fast); background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8' viewBox='0 0 24 24' fill='none' stroke='%2386868b' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 6px center; }
        .size-select:hover { border-color: var(--gray-light); }
        .size-select:focus { outline: none; border-color: var(--ocean); box-shadow: 0 0 0 3px var(--ocean-light); }
        .size-label { display: block; font-size: 9px; font-weight: 500; color: var(--charcoal); margin-bottom: 6px; letter-spacing: 0.5px; text-transform: uppercase; }

        .add-btn { padding: 10px 18px; background: none; border: none; color: var(--ocean); font-family: var(--font-main); font-size: 11px; font-weight: 500; letter-spacing: 0.5px; text-transform: uppercase; cursor: pointer; transition: all var(--transition-fast); border-radius: 6px; min-height: 44px; }
        .add-btn:hover { background: var(--ocean-light); }
        .add-btn.added { color: var(--tropique); }

        .cart-overlay { position: fixed; inset: 0; background: rgba(0, 0, 0, 0.3); backdrop-filter: blur(4px); z-index: 200; opacity: 0; visibility: hidden; transition: all var(--transition-smooth); }
        .cart-overlay.open { opacity: 1; visibility: visible; }
        .cart-panel { position: fixed; top: 0; right: 0; bottom: 0; width: 100%; max-width: 420px; background: var(--white); z-index: 201; display: flex; flex-direction: column; transform: translateX(100%); transition: transform var(--transition-smooth); box-shadow: -10px 0 40px rgba(0, 0, 0, 0.1); }
        .cart-panel.open { transform: translateX(0); }
        .cart-header { display: flex; align-items: center; justify-content: space-between; padding: 24px clamp(20px, 5vw, 32px); border-bottom: 1px solid var(--border); }
        .cart-title { font-size: 18px; font-weight: 500; letter-spacing: 0.5px; }
        .cart-close { display: flex; align-items: center; justify-content: center; width: 44px; height: 44px; background: none; border: none; cursor: pointer; border-radius: 50%; transition: background var(--transition-fast); }
        .cart-close:hover { background: var(--sand); }
        .cart-close svg { width: 20px; height: 20px; stroke: var(--black); stroke-width: 1.5; }
        .cart-body { flex: 1; overflow-y: auto; padding: clamp(20px, 5vw, 32px); }
        .cart-empty { text-align: center; padding: 60px 20px; color: var(--gray); font-size: 14px; font-weight: 400; }
        .cart-empty-icon { font-size: 48px; margin-bottom: 16px; opacity: 0.5; }
        .cart-item { display: flex; justify-content: space-between; align-items: flex-start; padding: 18px 0; border-bottom: 1px solid var(--border-light); animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .cart-item-info { flex: 1; }
        .cart-item-name { font-size: 13px; font-weight: 500; margin-bottom: 4px; }
        .cart-item-ref { font-size: 11px; color: var(--gray); letter-spacing: 0.3px; font-weight: 400; }
        .cart-item-qty { font-size: 12px; color: var(--ocean); font-weight: 500; margin-top: 6px; }
        .cart-item-remove { padding: 8px; background: none; border: none; color: var(--gray-light); cursor: pointer; transition: color var(--transition-fast); font-size: 18px; line-height: 1; }
        .cart-item-remove:hover { color: var(--black); }
        .cart-footer { padding: clamp(20px, 5vw, 32px); border-top: 1px solid var(--border); background: var(--off-white); }
        .cart-summary { display: flex; justify-content: space-between; margin-bottom: 20px; font-size: 13px; color: var(--gray); font-weight: 400; }
        .cart-summary strong { color: var(--black); font-weight: 500; }
        .cart-submit { width: 100%; padding: 18px; background: var(--black); border: none; border-radius: var(--radius); color: var(--white); font-family: var(--font-main); font-size: 13px; font-weight: 500; letter-spacing: 0.5px; cursor: pointer; transition: all var(--transition-fast); }
        .cart-submit:hover:not(:disabled) { background: var(--charcoal); transform: translateY(-1px); }
        .cart-submit:disabled { opacity: 0.4; cursor: not-allowed; }

        .footer { padding: 40px clamp(20px, 5vw, 40px); text-align: center; border-top: 1px solid var(--border); background: var(--off-white); }
        .footer-text { font-size: 11px; color: var(--gray); letter-spacing: 0.5px; font-weight: 400; }

        .order-form { display: none; margin-bottom: 20px; }
        .order-form.visible { display: block; }
        .form-group { margin-bottom: 16px; }
        .form-label { display: block; font-size: 11px; font-weight: 500; color: var(--charcoal); margin-bottom: 6px; letter-spacing: 0.5px; text-transform: uppercase; }
        .form-input, .form-textarea { width: 100%; padding: 12px; background: var(--white); border: 1px solid var(--border); border-radius: 6px; font-family: var(--font-main); font-size: 13px; color: var(--black); transition: border-color var(--transition-fast); }
        .form-input:focus, .form-textarea:focus { outline: none; border-color: var(--ocean); box-shadow: 0 0 0 3px var(--ocean-light); }
        .form-textarea { resize: vertical; min-height: 80px; }
    </style>
</head>
<body>
    <section class="home-page" id="homePage">
        <svg class="home-logo" viewBox="0 0 283.46 283.46" aria-label="OLDA Atelier">
            <g><path d="M81.27,54.16h-5.48l-.97,2.51h-4.94l6.3-14.42h4.78l6.3,14.42h-5.03l-.97-2.51ZM79.93,50.65l-1.4-3.63-1.4,3.63h2.8Z"/><path d="M96.93,46.02h-4.22v-3.77h13.31v3.77h-4.22v10.65h-4.86v-10.65Z"/><path d="M125.72,53v3.67h-11.99v-14.42h11.73v3.67h-6.94v1.69h6.1v3.5h-6.1v1.9h7.21Z"/><path d="M134.06,42.25h4.86v10.65h6.51v3.77h-11.38v-14.42Z"/><path d="M153.24,42.25h4.86v14.42h-4.86v-14.42Z"/><path d="M178.91,53v3.67h-11.99v-14.42h11.73v3.67h-6.94v1.69h6.1v3.5h-6.1v1.9h7.21Z"/><path d="M193.43,53.04h-1.32v3.63h-4.86v-14.42h6.94c4.02,0,6.57,2.1,6.57,5.44,0,2.08-.99,3.65-2.72,4.53l3.03,4.45h-5.19l-2.45-3.63ZM193.88,46h-1.77v3.38h1.77c1.34,0,1.98-.64,1.98-1.69s-.64-1.69-1.98-1.69Z"/></g>
            <path d="M187.85,114.63h33.12c.82,0,1.48.66,1.48,1.48v34.05c0,.82-.66,1.48-1.48,1.48h-73.22c-.82,0-1.48-.66-1.48-1.48v-76.52c0-.82.66-1.48,1.48-1.48h37.15c.82,0,1.48.66,1.48,1.48v39.51c0,.82.66,1.48,1.48,1.48Z"/>
            <path d="M141.24,238.96l41.28-77.18c.58-1.05,2.09-1.05,2.67,0l41.39,77.18c.56,1.02-.18,2.26-1.34,2.26h-82.67c-1.16,0-1.89-1.24-1.34-2.26Z"/>
            <g><path d="M101.44,161.74h-2.56l.48,79.48h1.16c20.68,0,38.61-15.44,40.49-36.03,2.14-23.57-16.43-43.44-39.57-43.44Z"/><path d="M95.36,161.74h-32.71c-.82,0-1.48.66-1.48,1.48v76.52c0,.82.66,1.48,1.48,1.48h32.26l.45-79.48Z"/></g>
            <path d="M140.12,108.5c-1.61-20.24-18-36.63-38.24-38.24-25.72-2.04-47.09,19.32-45.05,45.04,1.6,20.24,18,36.64,38.24,38.25.12,0,.23,0,.34.02l.23-39.79v-.05l-11.32,11.07s-1.19-11.25,6.13-12.84h-13s4.12-7.32,14.54-4.85l-7.67-7.67s11.86-1.72,12.82,6.62c1.07-8.9,12.54-6.48,12.54-6.48l-7.92,8.04c8.81-3.63,14.91,4.33,14.91,4.33h-13.05c4.85,1.4,6.01,6.08,6.2,9.41.14,2.05-.12,3.59-.12,3.59l-3.54-3.59-7.55-7.62.24,39.91c24-.2,43.23-20.71,41.29-45.17Z"/>
        </svg>
        <button class="home-btn" id="enterShop">Découvrir les produits</button>
    </section>

    <div class="shop-container" id="shopContainer">
        <header class="header" role="banner">
            <svg class="logo" viewBox="0 0 283.46 283.46" aria-label="OLDA Atelier">
                <g><path d="M81.27,54.16h-5.48l-.97,2.51h-4.94l6.3-14.42h4.78l6.3,14.42h-5.03l-.97-2.51ZM79.93,50.65l-1.4-3.63-1.4,3.63h2.8Z"/><path d="M96.93,46.02h-4.22v-3.77h13.31v3.77h-4.22v10.65h-4.86v-10.65Z"/><path d="M125.72,53v3.67h-11.99v-14.42h11.73v3.67h-6.94v1.69h6.1v3.5h-6.1v1.9h7.21Z"/><path d="M134.06,42.25h4.86v10.65h6.51v3.77h-11.38v-14.42Z"/><path d="M153.24,42.25h4.86v14.42h-4.86v-14.42Z"/><path d="M178.91,53v3.67h-11.99v-14.42h11.73v3.67h-6.94v1.69h6.1v3.5h-6.1v1.9h7.21Z"/><path d="M193.43,53.04h-1.32v3.63h-4.86v-14.42h6.94c4.02,0,6.57,2.1,6.57,5.44,0,2.08-.99,3.65-2.72,4.53l3.03,4.45h-5.19l-2.45-3.63ZM193.88,46h-1.77v3.38h1.77c1.34,0,1.98-.64,1.98-1.69s-.64-1.69-1.98-1.69Z"/></g>
                <path d="M187.85,114.63h33.12c.82,0,1.48.66,1.48,1.48v34.05c0,.82-.66,1.48-1.48,1.48h-73.22c-.82,0-1.48-.66-1.48-1.48v-76.52c0-.82.66-1.48,1.48-1.48h37.15c.82,0,1.48.66,1.48,1.48v39.51c0,.82.66,1.48,1.48,1.48Z"/>
                <path d="M141.24,238.96l41.28-77.18c.58-1.05,2.09-1.05,2.67,0l41.39,77.18c.56,1.02-.18,2.26-1.34,2.26h-82.67c-1.16,0-1.89-1.24-1.34-2.26Z"/>
                <g><path d="M101.44,161.74h-2.56l.48,79.48h1.16c20.68,0,38.61-15.44,40.49-36.03,2.14-23.57-16.43-43.44-39.57-43.44Z"/><path d="M95.36,161.74h-32.71c-.82,0-1.48.66-1.48,1.48v76.52c0,.82.66,1.48,1.48,1.48h32.26l.45-79.48Z"/></g>
                <path d="M140.12,108.5c-1.61-20.24-18-36.63-38.24-38.24-25.72-2.04-47.09,19.32-45.05,45.04,1.6,20.24,18,36.64,38.24,38.25.12,0,.23,0,.34.02l.23-39.79v-.05l-11.32,11.07s-1.19-11.25,6.13-12.84h-13s4.12-7.32,14.54-4.85l-7.67-7.67s11.86-1.72,12.82,6.62c1.07-8.9,12.54-6.48,12.54-6.48l-7.92,8.04c8.81-3.63,14.91,4.33,14.91,4.33h-13.05c4.85,1.4,6.01,6.08,6.2,9.41.14,2.05-.12,3.59-.12,3.59l-3.54-3.59-7.55-7.62.24,39.91c24-.2,43.23-20.71,41.29-45.17Z"/>
            </svg>
            <button class="cart-trigger" id="cartTrigger" aria-label="Ouvrir le panier">
                <svg viewBox="0 0 24 24"><path d="M5 8h14l1 13H4L5 8z"/><path d="M9 8V6a3 3 0 0 1 6 0v2"/></svg>
                <span class="cart-count" id="cartCount">0</span>
            </button>
        </header>
        <nav class="nav-main" id="navMain"></nav>
        <nav class="nav-sub" id="navSub"></nav>
        <main class="product-grid" id="productGrid"></main>
        <footer class="footer"><p class="footer-text">© 2026 OLDA Atelier — Saint-Martin, Antilles françaises</p></footer>
    </div>

    <div class="cart-overlay" id="cartOverlay"></div>
    <aside class="cart-panel" id="cartPanel">
        <header class="cart-header">
            <h2 class="cart-title">Votre Sélection</h2>
            <button class="cart-close" id="cartClose"><svg viewBox="0 0 24 24"><path d="M18 6L6 18M6 6l12 12" stroke-linecap="round"/></svg></button>
        </header>
        <div class="cart-body" id="cartBody"><div class="cart-empty"><div class="cart-empty-icon">☀️</div><p>Votre sélection est vide</p></div></div>
        <footer class="cart-footer">
            <div class="cart-summary"><span>Articles</span><strong id="cartTotal">0</strong></div>
            <form class="order-form" id="orderForm">
                <div class="form-group">
                    <label class="form-label" for="customerName">Nom</label>
                    <input type="text" class="form-input" id="customerName" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="customerEmail">Email</label>
                    <input type="email" class="form-input" id="customerEmail" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="customerComment">Commentaire</label>
                    <textarea class="form-textarea" id="customerComment"></textarea>
                </div>
            </form>
            <button class="cart-submit" id="cartSubmit" disabled>Confirmer la demande</button>
        </footer>
    </aside>

    <script>
    (function() {
        'use strict';
        const DATA = [
            { key: "nouveautes", label: "Nouveautés", sub: [{ key: "arrivages", label: "Arrivages", items: [
                { name: "Support Mobile Acrylique", ref: "SM 01" },
                { name: "Bloc Note Similicuir", ref: "BNSA6", detail: "A6 (105 x 148)" },
                { name: "Bloc Note Similicuir", ref: "BNS5", detail: "A5 (148 x 210)" }
            ]}]},
            { key: "tasses", label: "Tasses", sub: [
                { key: "ceramique-fuck", label: "Tasse Céramique Fuck", items: [
                    { name: "Tasse Fuck", ref: "TCF 01", size: "350ml", color: "Rouge & Blanc" },
                    { name: "Tasse Fuck", ref: "TCF 02", size: "350ml", color: "Orange & Blanc" },
                    { name: "Tasse Fuck", ref: "TCF 03", size: "350ml", color: "Rose & Blanc" },
                    { name: "Tasse Fuck", ref: "TCF 04", size: "350ml", color: "Bleu & Blanc" },
                    { name: "Tasse Fuck", ref: "TCF 05", size: "350ml", color: "Vert & Blanc" },
                    { name: "Tasse Fuck", ref: "TCF 06", size: "350ml", color: "Noir & Blanc" },
                    { name: "Tasse Fuck", ref: "TCF 07", size: "350ml", color: "Blanc & Bleu" },
                    { name: "Tasse Fuck", ref: "TCF 08", size: "350ml", color: "Blanc & Jaune" },
                    { name: "Tasse Fuck", ref: "TCF 09", size: "350ml", color: "Blanc & Orange" },
                    { name: "Tasse Fuck", ref: "TCF 10", size: "350ml", color: "Blanc & Rouge" },
                    { name: "Tasse Fuck", ref: "TCF 11", size: "350ml", color: "Blanc & Vert" },
                    { name: "Tasse Fuck", ref: "TCF 12", size: "350ml", color: "Blanc & Noir" },
                    { name: "Tasse Fuck", ref: "TCF 13", size: "350ml", color: "Noir & Rose" },
                    { name: "Tasse Fuck", ref: "TCF 14", size: "350ml", color: "Noir & Jaune" },
                    { name: "Tasse Fuck", ref: "TCF 15", size: "350ml", color: "Noir & Rouge" },
                    { name: "Tasse Fuck", ref: "TCF 16", size: "350ml", color: "Noir & Vert" },
                    { name: "Tasse Fuck", ref: "TCF 17", size: "350ml", color: "Noir & Orange" }
                ]},
                { key: "ceramique", label: "Tasse Céramique", items: [
                    { name: "Tasse Céramique", ref: "TC 01", size: "350ml", color: "Rouge & Blanc", img: "images/mugs/rougeblanc.jpg" },
                    { name: "Tasse Céramique", ref: "TC 02", size: "350ml", color: "Orange & Blanc", img: "images/mugs/orangeblanc.jpg" },
                    { name: "Tasse Céramique", ref: "TC 03", size: "350ml", color: "Rose & Blanc", img: "images/mugs/roseblanc.jpg" },
                    { name: "Tasse Céramique", ref: "TC 04", size: "350ml", color: "Bleu & Blanc", img: "images/mugs/bleublanc.jpg" },
                    { name: "Tasse Céramique", ref: "TC 05", size: "350ml", color: "Vert & Blanc", img: "images/mugs/vertblanc.jpg" },
                    { name: "Tasse Céramique", ref: "TC 06", size: "350ml", color: "Noir & Blanc", img: "images/mugs/noirblanc.jpg" },
                    { name: "Tasse Céramique", ref: "TC 07", size: "350ml", color: "Blanc & Bleu", img: "images/mugs/bleublanc.jpg" },
                    { name: "Tasse Céramique", ref: "TC 08", size: "350ml", color: "Blanc & Jaune", img: "images/mugs/blancjaune.jpg" },
                    { name: "Tasse Céramique", ref: "TC 09", size: "350ml", color: "Blanc & Orange", img: "images/mugs/blancorange.jpg" },
                    { name: "Tasse Céramique", ref: "TC 10", size: "350ml", color: "Blanc & Rouge", img: "images/mugs/blancrouge.jpg" },
                    { name: "Tasse Céramique", ref: "TC 11", size: "350ml", color: "Blanc & Vert", img: "images/mugs/blancvert.jpg" },
                    { name: "Tasse Céramique", ref: "TC 12", size: "350ml", color: "Blanc & Noir", img: "images/mugs/blancnoir.jpg" },
                    { name: "Tasse Céramique", ref: "TC 13", size: "350ml", color: "Noir & Rose", img: "images/mugs/noirrose.jpg" },
                    { name: "Tasse Céramique", ref: "TC 14", size: "350ml", color: "Noir & Jaune", img: "images/mugs/noirjaune.jpg" },
                    { name: "Tasse Céramique", ref: "TC 15", size: "350ml", color: "Noir & Rouge", img: "images/mugs/noirrouge.jpg" },
                    { name: "Tasse Céramique", ref: "TC 16", size: "350ml", color: "Noir & Vert", img: "images/mugs/noirvert.jpg" },
                    { name: "Tasse Céramique", ref: "TC 17", size: "350ml", color: "Noir & Orange", img: "images/mugs/noirorange.jpg" }
                ]},
                { key: "metal", label: "Tasse Métal", items: [
                    { name: "Tasse Métal", ref: "TM 01", size: "300ml", color: "Blanc", img: "images/mugs/metalblanc.png" },
                    { name: "Tasse Métal", ref: "TM 02", size: "300ml", color: "Jaune", img: "images/mugs/metaljaune.jpg" },
                    { name: "Tasse Métal", ref: "TM 03", size: "300ml", color: "Bleu", img: "images/mugs/metalbleu.jpg" }
                ]}
            ]},
            { key: "goodies", label: "Goodies", sub: [
                { key: "porte-cles", label: "Porte-Clés", items: [
                    { name: "Porte-Clés Plexiglass", ref: "PCP 01" },
                    { name: "Porte-Clés Bois", ref: "PCPB 01" },
                    { name: "Porte-Clés Acrylique", ref: "PCA 01", img: "images/mugs/portecleeplexiglass.jpg" },
                    { name: "Porte-Clés Flotteur Liège", ref: "PCFL 01" }
                ]},
                { key: "magnets", label: "Magnets", items: [
                    { name: "Magnet Plexiglass", ref: "MP 01" },
                    { name: "Magnet Bois", ref: "MB 01" },
                    { name: "Magnet Acrylique", ref: "MA 01" }
                ]},
                { key: "stickers", label: "Stickers", items: [{ name: "Sticker", ref: "STI 01", detail: "75 x 75" }]}
            ]},
            { key: "textiles", label: "Textiles", sub: [
                { key: "tshirt", label: "T-shirt", items: [
                    { name: "Tshirt kaki logo", ref: "BEA-16", sizes: ["XS", "S", "M", "L", "XL"], requiresSize: true }
                ]},
                { key: "sac-plage", label: "Sac de plage", items: [
                    { name: "Sac de plage", ref: "SDP 01", img: "images/mugs/sacdeplage.jpg" }
                ]},
                { key: "tote-bag", label: "Tote Bag", items: [] },
                { key: "pochette", label: "Pochette", items: [] }
            ]},
            { key: "accessoires", label: "Accessoires", sub: [
                { key: "quotidien", label: "Quotidien", items: [
                    { name: "Porte sac", ref: "PS 01", img: "images/mugs/portesac.jpg" },
                    { name: "Flasque Bois Clair", ref: "FBC 01", color: "Clair", img: "images/mugs/flasqueboisclair.png" },
                    { name: "Flasque Bois Foncé", ref: "FBF 01", color: "Foncé", img: "images/mugs/flasqueboisfonce.png" },
                    { name: "Limonadier Bois Foncé", ref: "LBF 01", color: "Foncé", img: "images/mugs/limonadierboisclair.png" },
                    { name: "Limonadier Bois Clair", ref: "LBC 01", color: "Clair", img: "images/mugs/limonadierboisclair.png" },
                    { name: "Identificateur Valise Liège", ref: "IVL 01" },
                    { name: "Petit Miroir Liège", ref: "PML 01", img: "images/mugs/petitmiroirliege.png" },
                    { name: "Couteau Multi Bois", ref: "CMB 01", img: "images/mugs/couteaumultibois.png" },
                    { name: "Pince à billet Argent", ref: "PBA 01", img: "images/mugs/pincebilletargent.png" }
                ]},
                { key: "art-table", label: "Art de la Table", items: [
                    { name: "Bouchon Bois", ref: "BB 01", img: "images/mugs/bouchonbois.png" },
                    { name: "Dessous de plat Liège", ref: "DPL 01", img: "images/mugs/dessousdeplatliege.png" },
                    { name: "Dessous de Verre Liège (par 1)", ref: "DVL 01", img: "images/mugs/dessousdeverreliege.png" },
                    { name: "Plateau en Liège", ref: "PL 01", img: "images/mugs/plateauliege.png" }
                ]},
                { key: "papeterie", label: "Papeterie & Impressions", items: [
                    { name: "Crayon papier bois", ref: "CPB 01" },
                    { name: "Stylo à bille en bois", ref: "SBB 01" },
                    { name: "Bloc Note Liège", ref: "BNLA6", detail: "A6 (105 x 148)" },
                    { name: "Bloc Note Similicuir", ref: "BNSA6", detail: "A6 (105 x 148)" },
                    { name: "Bloc Note Liège", ref: "BNLA5", detail: "A5 (148 x 210)" },
                    { name: "Bloc Note Similicuir", ref: "BNSA5", color: "Bleu", detail: "A5 (148 x 210)" },
                    { name: "Carte Postale", ref: "CPA6", detail: "A6 (105 x 148)" },
                    { name: "Affiche A3 + Tube", ref: "AFFA3", detail: "A3 (297 x 420)" }
                ]},
                { key: "jeux-loisirs", label: "Jeux & Loisirs", items: [
                    { name: "Morpion", ref: "MOR 01", img: "images/mugs/morpion.jpg" },
                    { name: "Dominos", ref: "DOM 01" },
                    { name: "Mikado", ref: "MIK 01" },
                    { name: "Yoyo", ref: "YOY 01" },
                    { name: "Jeux de Cartes", ref: "JDC 01" },
                    { name: "Raquette Bois", ref: "RB 01" }
                ]},
                { key: "bijoux", label: "Bijoux", items: [
                    { name: "Bracelet en Acrylique", ref: "BA 01" }
                ]},
                { key: "decoration", label: "Décoration", items: [
                    { name: "Tableau Black A4", ref: "TBA4" },
                    { name: "Tableau Black A3", ref: "TBA3" }
                ]}
            ]},
            { key: "offres", label: "Offres Spéciales", sub: [{ key: "volume", label: "Volume & Cadeaux", items: [
                { name: "Porte Carte Liège", ref: "PCL 01" },
                { name: "Couteau Multi Liège", ref: "CML 01" },
                { name: "Porte Monnaie Liège", ref: "PML 01" },
                { name: "Boîte à bijoux en bois", ref: "BAB 01" },
                { name: "Décapsuleur Bois", ref: "DB 01" },
                { name: "Boîte à clic-clac", ref: "BCC 01" },
                { name: "Cendrier Liège", ref: "CL 01" }
            ]}]}
        ];

        const QTY_OPTIONS = [];
        for (let i = 1; i <= 50; i++) {
            let label = i.toString();
            if (i === 10) label = i + ' — Offre -5%';
            if (i === 25) label = i + ' — Offre -10%';
            if (i === 50) label = i + ' — Offre -15%';
            QTY_OPTIONS.push({ val: i, label: label });
        }

        let currentMainCat = DATA[1];
        let currentSubCat = DATA[1].sub[0];
        let cart = [];

        const $ = id => document.getElementById(id);
        const homePage = $('homePage'), enterShop = $('enterShop'), shopContainer = $('shopContainer');
        const navMain = $('navMain'), navSub = $('navSub'), productGrid = $('productGrid');
        const cartTrigger = $('cartTrigger'), cartOverlay = $('cartOverlay'), cartPanel = $('cartPanel');
        const cartClose = $('cartClose'), cartBody = $('cartBody'), cartCount = $('cartCount');
        const cartTotal = $('cartTotal'), cartSubmit = $('cartSubmit');
        const orderForm = $('orderForm'), customerName = $('customerName');
        const customerEmail = $('customerEmail'), customerComment = $('customerComment');

        enterShop.addEventListener('click', () => { homePage.classList.add('hidden'); shopContainer.classList.add('visible'); });

        const logoHeader = document.querySelector('.logo');
        logoHeader.addEventListener('click', () => { homePage.classList.remove('hidden'); shopContainer.classList.remove('visible'); });

        function renderNavMain() {
            navMain.innerHTML = DATA.map(c => '<button class="tab-btn' + (c.key === currentMainCat.key ? ' active' : '') + '" data-key="' + c.key + '">' + c.label + '</button>').join('');
            navMain.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const cat = DATA.find(c => c.key === btn.dataset.key);
                    if (cat) { currentMainCat = cat; currentSubCat = cat.sub[0]; renderNavMain(); renderNavSub(); renderProducts(); }
                });
            });
        }

        function renderNavSub() {
            navSub.innerHTML = currentMainCat.sub.map(s => '<button class="sub-btn' + (s.key === currentSubCat.key ? ' active' : '') + '" data-key="' + s.key + '">' + s.label + '</button>').join('');
            navSub.querySelectorAll('.sub-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const sub = currentMainCat.sub.find(s => s.key === btn.dataset.key);
                    if (sub) { currentSubCat = sub; renderNavSub(); renderProducts(); }
                });
            });
        }

        function renderProducts() {
            productGrid.innerHTML = currentSubCat.items.map(item => {
                let info = item.ref;
                if (item.color) info += ' | ' + item.color;
                if (item.size && !item.requiresSize) info += ' | ' + item.size;
                if (item.detail) info += ' | ' + item.detail;

                // Générer le sélecteur de taille si nécessaire
                let sizeSelector = '';
                if (item.requiresSize && item.sizes) {
                    sizeSelector = '<label class="size-label">Taille</label><select class="size-select">' +
                        item.sizes.map(s => '<option value="' + s + '">' + s + '</option>').join('') +
                        '</select>';
                }

                return '<article class="product-card" data-ref="' + item.ref + '">' +
                    '<div class="product-img"' + (item.img ? ' style="background-image: url(\'' + item.img + '\')"' : '') + '></div>' +
                    '<h3 class="product-title">' + item.name + '</h3>' +
                    '<p class="product-info">' + info + '</p>' +
                    sizeSelector +
                    '<select class="qty-select">' + QTY_OPTIONS.map(o => '<option value="' + o.val + '">' + o.label + '</option>').join('') + '</select>' +
                    '<button class="add-btn" data-ref="' + item.ref + '">Ajouter</button>' +
                    '</article>';
            }).join('');

            productGrid.querySelectorAll('.add-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const card = btn.closest('.product-card');
                    const item = currentSubCat.items.find(i => i.ref === btn.dataset.ref);
                    const qty = parseInt(card.querySelector('.qty-select').value);

                    // Récupérer la taille si le produit en nécessite une
                    let selectedSize = null;
                    if (item.requiresSize) {
                        const sizeSelect = card.querySelector('.size-select');
                        if (sizeSelect) selectedSize = sizeSelect.value;
                    }

                    if (item) {
                        addToCart(item, qty, selectedSize);
                        btn.textContent = '✓ Ajouté';
                        btn.classList.add('added');
                        setTimeout(() => { btn.textContent = 'Ajouter'; btn.classList.remove('added'); }, 1500);
                    }
                });
            });
            observeProducts();
        }

        function observeProducts() {
            const observer = new IntersectionObserver(entries => { entries.forEach(e => { if (e.isIntersecting) { e.target.classList.add('visible'); observer.unobserve(e.target); } }); }, { threshold: 0.1, rootMargin: '50px' });
            productGrid.querySelectorAll('.product-card').forEach(card => observer.observe(card));
        }

        function addToCart(item, qty, selectedSize) {
            // Créer une clé unique basée sur ref + taille (pour les produits avec taille)
            const cartKey = selectedSize ? item.ref + '-' + selectedSize : item.ref;

            // Chercher si l'article existe déjà avec la même taille
            const existing = cart.find(i => {
                const existingKey = i.selectedSize ? i.ref + '-' + i.selectedSize : i.ref;
                return existingKey === cartKey;
            });

            if (existing) {
                existing.qty += qty;
            } else {
                const cartItem = { ...item, qty };
                if (selectedSize) cartItem.selectedSize = selectedSize;
                cart.push(cartItem);
            }
            updateCartUI();
        }

        function removeFromCart(ref, selectedSize) {
            cart = cart.filter(i => {
                const cartKey = i.selectedSize ? i.ref + '-' + i.selectedSize : i.ref;
                const removeKey = selectedSize ? ref + '-' + selectedSize : ref;
                return cartKey !== removeKey;
            });
            updateCartUI();
        }

        function updateCartUI() {
            const total = cart.reduce((sum, i) => sum + i.qty, 0);
            cartCount.textContent = total; cartCount.classList.toggle('visible', total > 0);
            cartTotal.textContent = total; cartSubmit.disabled = cart.length === 0;
            orderForm.classList.toggle('visible', cart.length > 0);
            if (cart.length === 0) {
                cartBody.innerHTML = '<div class="cart-empty"><div class="cart-empty-icon">☀️</div><p>Votre sélection est vide</p></div>';
            } else {
                cartBody.innerHTML = cart.map(i => {
                    let details = i.ref;
                    if (i.color) details += ' | ' + i.color;
                    if (i.selectedSize) details += ' | Taille ' + i.selectedSize;
                    else if (i.size) details += ' | ' + i.size;

                    const removeKey = i.selectedSize || '';
                    return '<div class="cart-item"><div class="cart-item-info"><div class="cart-item-name">' + i.name + '</div><div class="cart-item-ref">' + details + '</div><div class="cart-item-qty">Quantité : ' + i.qty + '</div></div><button class="cart-item-remove" data-ref="' + i.ref + '" data-size="' + removeKey + '">×</button></div>';
                }).join('');
                cartBody.querySelectorAll('.cart-item-remove').forEach(btn => {
                    btn.addEventListener('click', () => removeFromCart(btn.dataset.ref, btn.dataset.size || null));
                });
            }
        }

        function openCart() { cartOverlay.classList.add('open'); cartPanel.classList.add('open'); document.body.style.overflow = 'hidden'; }
        function closeCart() { cartOverlay.classList.remove('open'); cartPanel.classList.remove('open'); document.body.style.overflow = ''; }

        cartTrigger.addEventListener('click', openCart);
        cartClose.addEventListener('click', closeCart);
        cartOverlay.addEventListener('click', closeCart);
        document.addEventListener('keydown', e => { if (e.key === 'Escape' && cartPanel.classList.contains('open')) closeCart(); });

        cartSubmit.addEventListener('click', () => {
            if (!customerName.value || !customerEmail.value) {
                alert('Veuillez remplir votre nom et email.');
                return;
            }

            // Générer un numéro de commande unique (Format: 2026-XXXX)
            const orderNumber = '2026-' + String(Date.now()).slice(-4) + Math.floor(Math.random() * 10);

            // Créer le tableau HTML des produits pour l'email
            let orderTableRows = cart.map(i => {
                let spec = '';
                if (i.color && i.selectedSize) spec = i.color + ' / Taille ' + i.selectedSize;
                else if (i.color && i.size) spec = i.color + ' / ' + i.size;
                else if (i.selectedSize) spec = 'Taille ' + i.selectedSize;
                else if (i.color) spec = i.color;
                else if (i.size) spec = 'Taille ' + i.size;
                else if (i.detail) spec = i.detail;
                else spec = '—';

                return '<tr>' +
                    '<td class="product-name">' + i.name + '</td>' +
                    '<td class="product-ref">' + i.ref + '</td>' +
                    '<td class="product-spec">' + spec + '</td>' +
                    '<td class="product-qty">' + i.qty + '</td>' +
                    '</tr>';
            }).join('');

            // Paramètres EmailJS
            const templateParams = {
                order_number: orderNumber,
                customer_name: customerName.value,
                customer_email: customerEmail.value,
                customer_comment: customerComment.value || '',
                order_table_rows: orderTableRows,
                total_items: cart.reduce((sum, i) => sum + i.qty, 0)
            };

            // Désactiver le bouton pendant l'envoi
            cartSubmit.disabled = true;
            cartSubmit.textContent = 'Envoi en cours...';

            // Initialiser EmailJS avec la clé publique
            emailjs.init('Y9NKwhNvCNtb_SRry');

            // Envoyer l'email via EmailJS
            emailjs.send('service_1cvmozk', 'template_ptouuob', templateParams)
                .then(() => {
                    alert('Votre commande #' + orderNumber + ' a été envoyée avec succès !');
                    cart = [];
                    updateCartUI();
                    customerName.value = '';
                    customerEmail.value = '';
                    customerComment.value = '';
                    closeCart();
                    cartSubmit.textContent = 'Confirmer la demande';
                }, (error) => {
                    alert('Erreur lors de l\'envoi. Veuillez réessayer.');
                    console.error('EmailJS error:', error);
                    cartSubmit.disabled = false;
                    cartSubmit.textContent = 'Confirmer la demande';
                });
        });

        renderNavMain(); renderNavSub(); renderProducts(); updateCartUI();
    })();
    </script>
</body>
</html>
